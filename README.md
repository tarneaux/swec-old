WIP, see branch `old` for more basic info.

In this new branch I'm making an attempt at making the program's architecture less monolithic.
